(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={searchBar:"SearchBar_searchBar__2YIYB",searchInput:"SearchBar_searchInput__2_ilV",searchButton:"SearchBar_searchButton__1HHjF"}},12:function(e,t,a){e.exports={overlay:"Modal_overlay__1wBxK",modal:"Modal_modal__3Dhbp"}},29:function(e,t,a){},30:function(e,t,a){},4:function(e,t,a){e.exports={imageGallery:"imageGallery_imageGallery__2F2N0",listImage:"imageGallery_listImage__15u4q",listItem:"imageGallery_listItem__38IpK",containerMore:"imageGallery_containerMore__3RLA_",moreButton:"imageGallery_moreButton__16T0T"}},71:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(9),c=a.n(r),i=(a(29),a(13)),s=a(14),l=a(5),u=a(6),g=a(8),h=a(7),d=(a(30),a(10)),m=a.n(d),j=a(0),p=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={query:""},e.onSearch=function(t){t.preventDefault(),e.props.onSubmit(e.state.query)},e.onFilterChange=function(t){var a=t.currentTarget.value;e.setState({query:a})},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(j.jsx)("header",{className:m.a.searchBar,children:Object(j.jsxs)("form",{className:"SearchForm",children:[Object(j.jsx)("input",{className:m.a.searchInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.query,onChange:this.onFilterChange}),Object(j.jsx)("button",{disabled:!this.state.query.length,onClick:this.onSearch,type:"submit",className:m.a.searchButton,children:"Search"})]})})}}]),a}(n.Component),f=a(4),b=a.n(f),y=function(e){return e.images.map((function(t){return Object(j.jsx)("li",{className:b.a.listItem,children:Object(j.jsx)("img",{onClick:function(a){a.currentTarget===a.target&&e.toggleModal(t.largeImageURL)},src:t.previewURL,alt:t.tags,className:b.a.listImage})})}))},O=function(e){return console.log(e.images),Object(j.jsx)("ul",{className:b.a.imageGallery,children:Object(j.jsx)(y,{images:e.images,toggleModal:e.toggleModal})})},v=function(e){return Object(j.jsx)("div",{className:b.a.containerMore,children:Object(j.jsx)("button",{className:b.a.moreButton,onClick:function(){e.fetchImages(),e.toggleLoader()},children:"Load More"})})},_=a(12),x=a.n(_),S=document.querySelector("#modal-root"),w=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onEscape=function(t){"Escape"===t.code&&(e.props.toggleModal(),console.log(t.code))},e.onOverlayClick=function(t){t.currentTarget===t.target&&e.props.toggleModal()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onEscape)}},{key:"render",value:function(){return Object(r.createPortal)(Object(j.jsx)("div",{onClick:this.onOverlayClick,className:x.a.overlay,children:Object(j.jsx)("div",{className:x.a.modal,children:this.props.children})}),S)}}]),a}(n.Component),M=a(23),I=(a(50),a(24)),L=a.n(I),k="20377131-0ebe9e49bfd56e929e88257a9",B=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={images:[],currentPage:1,searchQuery:"",showModal:!1,imageSrc:"",isLoading:!1},e.onSearchQuery=function(t){e.setState({searchQuery:t,currentPage:1,images:[]}),e.toggleLoader()},e.fetchImages=function(){var t=e.state,a=t.currentPage,n=t.searchQuery;return M.get("https://pixabay.com/api/?q=".concat(n,"&page=").concat(a,"&key=").concat(k,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data})).then((function(e){return e.hits})).then((function(t){e.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{images:[].concat(Object(i.a)(e.images),Object(i.a)(t)),currentPage:e.currentPage+1})}))})).then((function(){e.onSmoothScroll(),e.toggleLoader()}))},e.toggleLoader=function(){e.setState((function(e){return{isLoading:!e.isLoading}}))},e.onSmoothScroll=function(){e.state.currentPage>2&&setTimeout((function(){window.scrollTo({top:1e6,behavior:"smooth"})}),500)},e.toggleModal=function(t){e.setState((function(e){var a=e.showModal;e.imageSrc;return{showModal:!a,imageSrc:t}}))},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.fetchImages()}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.isLoading,n=e.showModal,o=e.imageSrc,r=e.searchQuery;return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(p,{onSubmit:this.onSearchQuery}),Object(j.jsx)(O,{images:t,toggleModal:this.toggleModal}),t.length>0&&!a&&Object(j.jsx)(v,{toggleLoader:this.toggleLoader,fetchImages:this.fetchImages}),this.state.isLoading&&Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)(L.a,{type:"BallTriangle",color:"#000080",height:40,width:40})}),n&&Object(j.jsx)(w,{toggleModal:this.toggleModal,children:Object(j.jsx)("img",{src:o,alt:""})}),0===t.length&&r.length>0&&!a&&Object(j.jsx)("div",{className:"emptyPage",children:Object(j.jsx)("p",{children:"Oops, nothing found"})})]})}}]),a}(n.Component),C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,72)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),o(e),r(e),c(e)}))};c.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(B,{})}),document.getElementById("root")),C()}},[[71,1,2]]]);
//# sourceMappingURL=main.d73b0c2e.chunk.js.map